!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("ol/layer/Vector"),require("ol/source/Vector"),require("ol/Feature"),require("ol/Overlay"),require("ol/proj"),require("ol/sphere"),require("ol/geom/Polygon"),require("ol/geom/MultiPolygon"),require("ol/geom/Point"),require("ol/geom/Circle"),require("ol/events/Event"),require("ol/style/Style"),require("ol/style/Fill"),require("ol/style/Stroke"),require("ol/style/Icon"),require("ol/control/Control"),require("ol/color"),require("ol/extent"),require("ol/Observable")):"function"==typeof define&&define.amd?define(["ol/layer/Vector","ol/source/Vector","ol/Feature","ol/Overlay","ol/proj","ol/sphere","ol/geom/Polygon","ol/geom/MultiPolygon","ol/geom/Point","ol/geom/Circle","ol/events/Event","ol/style/Style","ol/style/Fill","ol/style/Stroke","ol/style/Icon","ol/control/Control","ol/color","ol/extent","ol/Observable"],t):(e="undefined"!=typeof globalThis?globalThis:e||self).DjiGeozones=t(e.ol.layer.Vector,e.ol.source.Vector,e.ol.Feature,e.ol.Overlay,e.ol.proj,e.ol.sphere,e.ol.geom.Polygon,e.ol.geom.MultiPolygon,e.ol.geom.Point,e.ol.geom.Circle,e.ol.events.Event,e.ol.style.Style,e.ol.style.Fill,e.ol.style.Stroke,e.ol.style.Icon,e.ol.control.Control,e.ol.color,e.ol.extent,e.ol.Observable)}(this,(function(e,t,n,o,r,i,a,s,l,c,d,u,p,f,m,h,v,y,g){"use strict";function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function _(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var o,r,i,a,s=[],l=!0,c=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(o=i.call(n)).done)&&(s.push(o.value),s.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return s}}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function E(e,t,n,o,r,i,a){try{var s=e[i](a),l=s.value}catch(e){return void n(e)}s.done?t(l):Promise.resolve(l).then(o,r)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){E(i,o,r,a,s,"next",e)}function s(e){E(i,o,r,a,s,"throw",e)}a(void 0)}))}}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,t||"default");if("object"!==b(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===b(t)?t:String(t)}function P(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,L(o.key),o)}}function C(e,t,n){return t&&P(e.prototype,t),n&&P(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}function I(){return I="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var o=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(o){var r=Object.getOwnPropertyDescriptor(o,t);return r.get?r.get.call(arguments.length<3?e:n):r.value}},I.apply(this,arguments)}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function Z(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}function M(e,t,n){return(t=L(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var G={exports:{}},D={exports:{}};!function(e){function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(D);var q=D.exports;!function(e){var t=q.default;function n(){e.exports=n=function(){return o},e.exports.__esModule=!0,e.exports.default=e.exports;var o={},r=Object.prototype,i=r.hasOwnProperty,a=Object.defineProperty||function(e,t,n){e[t]=n.value},s="function"==typeof Symbol?Symbol:{},l=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",d=s.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(e){u=function(e,t,n){return e[t]=n}}function p(e,t,n,o){var r=t&&t.prototype instanceof h?t:h,i=Object.create(r.prototype),s=new P(o||[]);return a(i,"_invoke",{value:E(e,n,s)}),i}function f(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}o.wrap=p;var m={};function h(){}function v(){}function y(){}var g={};u(g,l,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(C([])));w&&w!==r&&i.call(w,l)&&(g=w);var _=y.prototype=h.prototype=Object.create(g);function j(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,n){function o(r,a,s,l){var c=f(e[r],e,a);if("throw"!==c.type){var d=c.arg,u=d.value;return u&&"object"==t(u)&&i.call(u,"__await")?n.resolve(u.__await).then((function(e){o("next",e,s,l)}),(function(e){o("throw",e,s,l)})):n.resolve(u).then((function(e){d.value=e,s(d)}),(function(e){return o("throw",e,s,l)}))}l(c.arg)}var r;a(this,"_invoke",{value:function(e,t){function i(){return new n((function(n,r){o(e,t,n,r)}))}return r=r?r.then(i,i):i()}})}function E(e,t,n){var o="suspendedStart";return function(r,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw i;return A()}for(n.method=r,n.arg=i;;){var a=n.delegate;if(a){var s=k(a,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var l=f(e,t,n);if("normal"===l.type){if(o=n.done?"completed":"suspendedYield",l.arg===m)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(o="completed",n.method="throw",n.arg=l.arg)}}}function k(e,t){var n=t.method,o=e.iterator[n];if(void 0===o)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,k(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var r=f(o,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,m;var i=r.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,m):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,m)}function z(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function L(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function P(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(z,this),this.reset(!0)}function C(e){if(e){var t=e[l];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,o=function t(){for(;++n<e.length;)if(i.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:A}}function A(){return{value:void 0,done:!0}}return v.prototype=y,a(_,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:v,configurable:!0}),v.displayName=u(y,d,"GeneratorFunction"),o.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},o.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,d,"GeneratorFunction")),e.prototype=Object.create(_),e},o.awrap=function(e){return{__await:e}},j(x.prototype),u(x.prototype,c,(function(){return this})),o.AsyncIterator=x,o.async=function(e,t,n,r,i){void 0===i&&(i=Promise);var a=new x(p(e,t,n,r),i);return o.isGeneratorFunction(t)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},j(_),u(_,d,"Generator"),u(_,l,(function(){return this})),u(_,"toString",(function(){return"[object Generator]"})),o.keys=function(e){var t=Object(e),n=[];for(var o in t)n.push(o);return n.reverse(),function e(){for(;n.length;){var o=n.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},o.values=C,P.prototype={constructor:P,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function n(n,o){return a.type="throw",a.arg=e,t.next=n,o&&(t.method="next",t.arg=void 0),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o],a=r.completion;if("root"===r.tryLoc)return n("end");if(r.tryLoc<=this.prev){var s=i.call(r,"catchLoc"),l=i.call(r,"finallyLoc");if(s&&l){if(this.prev<r.catchLoc)return n(r.catchLoc,!0);if(this.prev<r.finallyLoc)return n(r.finallyLoc)}else if(s){if(this.prev<r.catchLoc)return n(r.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return n(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&i.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var r=o;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=e,a.arg=t,r?(this.method="next",this.next=r.finallyLoc,m):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),L(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;L(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),m}},o}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(G);var V=(0,G.exports)(),F=V;try{regeneratorRuntime=V}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=V:Function("r","regeneratorRuntime = r")(V)}var R=T(F),B=[{id:0,color:"#FFCC00",zIndex:11,markerIcon:"https://www1.djicdn.com/dps/6734f5340f66c7be37db48c8889392bf.png",markerCircle:"https://www2.djicdn.com/assets/images/flysafe/geo-system/warning-98a8a2c8d6768e22957488ce962d77c3.png?from=cdnMap"},{id:1,color:"#1088F2",zIndex:13,markerIcon:"https://www1.djicdn.com/dps/fbbea9e33581907cac182adb4bcd0c94.png",markerCircle:"https://www4.djicdn.com/assets/images/flysafe/geo-system/authorization-878e879982c9555bcaab7bb6bce3c6ca.png?from=cdnMap"},{id:2,color:"#DE4329",zIndex:15,markerIcon:"https://www1.djicdn.com/dps/d47dfe9f089f259631fbed99610b8b5a.png",markerCircle:"https://www5.djicdn.com/assets/images/flysafe/geo-system/restricted-e0ce1467a8df2d07ec6a33cf11f4279e.png?from=cdnMap"},{id:3,color:"#EE8815",zIndex:12,markerIcon:"https://www1.djicdn.com/dps/df822149e1e6e9e804e177813e044238.png",markerCircle:"https://www4.djicdn.com/assets/images/flysafe/geo-system/enhanced_warning-623fea05bff2f83f3c0ff5a65a41a1df.png?from=cdnMap"},{id:4,color:"#37C4DB",zIndex:11,markerIcon:"https://www1.djicdn.com/dps/53b33783709b6ed06bc3afdd21ac2a81.png",markerCircle:"https://www4.djicdn.com/assets/images/flysafe/geo-system/recommended-e92f991d039ae145c9b1c72ad62b26b2.png?from=cdnMap"},{id:5,color:"#00BE00",zIndex:11,markerIcon:"https://www1.djicdn.com/dps/53b33783709b6ed06bc3afdd21ac2a81.png",markerCircle:"https://www4.djicdn.com/assets/images/flysafe/geo-system/recommended-e92f991d039ae145c9b1c72ad62b26b2.png?from=cdnMap"},{id:6,color:"#979797",zIndex:10,markerIcon:"https://www1.djicdn.com/dps/f5961991d664e130fcf9ad01b1f28043.png",markerCircle:"https://www1.djicdn.com/assets/images/flysafe/geo-system/Oval-34907c1071d63a3f1fffdc739b0943d9.png?from=cdnMap"},{id:7,color:"#00BE00",zIndex:11,markerIcon:"https://www1.djicdn.com/dps/9d922ae5fbd80d3166a844a9e249ceb3.png",markerCircle:"https://www1.djicdn.com/assets/images/flysafe/geo-system/regulations-2dfeef5b11017811dcaa720c86c49406.png?from=cdnMap"},{id:8,color:"#00BE00",zIndex:11,markerIcon:"https://www1.djicdn.com/dps/53b33783709b6ed06bc3afdd21ac2a81.png",markerCircle:"https://www1.djicdn.com/dps/a968914208241c3f6a5a3c64c221b8ff.png"},{id:9,color:"#DE4329",zIndex:15,markerIcon:"https://www1.djicdn.com/dps/d47dfe9f089f259631fbed99610b8b5a.png",markerCircle:"https://www5.djicdn.com/assets/images/flysafe/geo-system/restricted-e0ce1467a8df2d07ec6a33cf11f4279e.png?from=cdnMap"}],N=[{id:"dji-mini-3",label:"DJI Mini 3"},{id:"dji-mavic-3-classic",label:"DJI Mini 3 Classic"},{id:"industry-260",label:"Mavic 3E/3T"},{id:"dji-avata",label:"Avata"},{id:"dji-mini-3-pro",label:"Mini 3 Pro"},{id:"dji-mavic-3",label:"Mavic 3"},{id:"dji-mini-se",label:"Mavic Mini SE"},{id:"dji-air-2s",label:"Air 2s"},{id:"dji-fpv",label:"FPV"},{id:"mavic-mini-2",label:"Mavic Mini 2"},{id:"mavic-mini",label:"Mavic Mini"},{id:"mavic-2-enterprise",label:"Mavic 2 Enterprise"},{id:"mavic-2",label:"Mavic 2"},{id:"mavic-air",label:"Mavic Air"},{id:"mavic-air-2",label:"Mavic Air 2"},{id:"mavic-pro",label:"Mavic Pro"},{id:"spark",label:"Spark"},{id:"phantom-4-pro",label:"Phantom 4 Pro"},{id:"phantom-4-advanced",label:"Phantom 4 Advanced"},{id:"phantom-4",label:"Phantom 4"},{id:"phantom-4-rtk",label:"Phantom 4 RTK"},{id:"phantom-4-multispectral",label:"Phantom 4 Multispectral"},{id:"phantom-3-pro",label:"Phantom 3 Pro"},{id:"phantom-3-advanced",label:"Phantom 3 Advanced"},{id:"phantom-3-standard",label:"Phantom 3 Standard"},{id:"phantom-3-4K",label:"Phantom 3 4K"},{id:"phantom-3-se",label:"Phantom 3 SE"},{id:"inspire-2",label:"Inspire 2"},{id:"inspire-1-series",label:"Inspire 1 Series"},{id:"m200-series",label:"M200 Series"},{id:"m300-series",label:"M300 Series"},{id:"m600-series",label:"M600 Series"},{id:"m100",label:"M100"},{id:"mg1p",label:"MG 1S/1A/1P/1P RTK/T10/T16/T20/T30"},{id:"dji-mini-2",label:"DJI Mini 2"}],H=Object.freeze({__proto__:null,en:{labels:{djiGeoZones:"Dji Geo Zones",level:"Level",type:"Type",startTime:"Start Time",endTime:"End Time",timeTips:"Time: 24-hour clock",maxAltitude:"Max. Altitude",address:"Address",tips:"Tips",link:"Link",learnMore:"Learn More",helperZoom:"Zoom in to see the Geo Zones",expand:"Expand",collapse:"Collapse",hideGeozones:"Hide Geo Zones",showHide:"Show/Hide Geo Zones"},levels:[{id:0,name:"Warning Zones",desc:"In these Zones, which may not necessarily appear on the DJI GO map, users will be prompted with a warning message. Example Warning Zone: Class E airspace"},{id:1,name:"Authorization Zones",desc:"In these Zones, which appear blue in the DJI GO map, users will be prompted with a warning and flight is limited by default. Authorization Zones may be unlocked by authorized users using a DJI verified account."},{id:2,name:"Restricted Zones",desc:"In these Zones, which appear red the DJI GO app, users will be prompted with a warning and flight is prevented. If you believe you have the authorization to operate in a Restricted Zone, please contact flysafe@dji.com or Online Unlocking."},{id:3,name:"Enhanced Warning Zones",desc:"In these Zones, you will be prompted by GEO at the time of flight to unlock the zone using the same steps as in an Authorization Zone, but you do not require a verified account or an internet connection at the time of your flight."},{id:4,name:"Regulatory Restricted Zones",desc:"Due to local regulations and policies, flights are prohibited within the scope of some special areas. (Example：Prison)"},{id:5,name:"Recommended Zones",desc:""},{id:6,name:"Altitude Zones",desc:"Altitude zones will appear in gray on the map. Users receive warnings in DJI GO, or DJI GO 4 and flight altitude is limited."},{id:7,name:"Recommended Zones",desc:"This area is shown in green on the map. It is recommended that you choose these areas for flight arrangements."},{id:8,name:"Approved Zones for Light UAVs(China)",desc:"For Approved Zones, pilots of light UAVs flying at an altitude of 120 m or less are not required to obtain permission to fly. Pilots who are planning to fly medium-sized UAVs in Approved Zones at an altitude higher than 120 m, or in GEO Zones other than Approved Zones, must obtain permission via UTMISS before taking off"},{id:9,name:"Densely Populated Area",desc:"This area is shown in red on the map. Under normal circumstances, the population of this area is more concentrated, so please do not fly over this area. (Example: Commercial Block)"}],types:[{id:0,name:"Airport"},{id:1,name:"Special Zone"},{id:2,name:"Military Zone"},{id:4,name:"Recommended Zones"},{id:10,name:"Airport"},{id:13,name:"Recreational airport"},{id:14,name:"Recreational airport"},{id:15,name:"Class B Airspace"},{id:16,name:"Class C Airspace"},{id:17,name:"Class D Airspace"},{id:18,name:"Class E Airspace"},{id:19,name:"Heliport"},{id:23,name:"Power plant"},{id:24,name:"Prison"},{id:26,name:"Stadium"},{id:27,name:"Prohibited Airspace"},{id:28,name:"Restricted Airspace"},{id:29,name:"Temporary Flight Restriction"},{id:30,name:"Nuclear Power Plant"},{id:31,name:"Unpaved Airports"},{id:32,name:"Special Zones"},{id:33,name:"Military Zones"},{id:34,name:"Heliport"},{id:35,name:"Seaplane Base"},{id:36,name:"Temporary Flight Restriction"},{id:39,name:"Approved Zones for Light UAVs"},{id:41,name:"Regulatory Restricted Zones for Light UAVs"}]},es:{labels:{djiGeoZones:"Zonas Geo DJI",level:"Nivel",type:"Tipo",startTime:"Horario de apertura",endTime:"Horario de cierre",timeTips:"Sistema horario: 24 horas",maxAltitude:"Altitud máxima",address:"Dirección",tips:"Consejos",link:"Enlace",learnMore:"Leer más",helperZoom:"Acerque la vista para ver las Zonas Geo",expand:"Expandir",collapse:"Colapsar",hideGeozones:"Ocultar Zonas Geo",showHide:"Mostrar/Ocultar Zonas Geo"},levels:[{id:0,name:"Zonas de advertencia",desc:"En estas Zonas, que pueden no aparecer necesariamente en el mapa DJI GO, los usuarios recibirán un mensaje de advertencia. Ejemplo de zona de advertencia: espacio aéreo de clase E"},{id:1,name:"Zonas de autorización",desc:"En estas Zonas, que aparecen en azul en el mapa DJI GO, los usuarios recibirán una advertencia y el vuelo está limitado por defecto. Las zonas de autorización pueden ser desbloqueadas por usuarios autorizados mediante una cuenta verificada por DJI."},{id:2,name:"Zonas restringidas",desc:"En estas Zonas, que aparecen en rojo en la aplicación DJI GO, los usuarios recibirán una advertencia y se impedirá el vuelo. Si cree que tiene la autorización para operar en una Zona restringida, comuníquese con flysafe@dji.com o Desbloqueo en línea."},{id:3,name:"Zonas de advertencia ampliadas",desc:"En estas Zonas, GEO le pedirá en el momento del vuelo que desbloquee la zona siguiendo los mismos pasos que en una Zona de autorización, pero no necesita una cuenta verificada o una conexión a Internet en el momento de su vuelo."},{id:4,name:"Zonas reglamentarias restringidas",desc:"Debido a las regulaciones y políticas locales, los vuelos están prohibidos dentro del alcance de algunas áreas especiales. (Ejemplo: prisión)"},{id:5,name:"Zonas recomendadas",desc:""},{id:6,name:"Zonas de altiutud",desc:"Las zonas de altitud aparecerán en gris en el mapa. Los usuarios reciben advertencias en DJI GO o DJI GO 4 y la altitud de vuelo es limitada."},{id:7,name:"Zonas recomendadas",desc:"Esta área se muestra en verde en el mapa. Se recomienda que elija estas áreas para los arreglos de vuelo."},{id:8,name:"Zonas aprobadas para VANTs livianos (China)",desc:"Para las zonas aprobadas, los pilotos de vehículos aéreos no tripulados ligeros que vuelan a una altitud de 120 mo menos no están obligados a obtener permiso para volar. Los pilotos que planean volar UAV de tamaño mediano en Zonas Aprobadas a una altitud superior a 120 m, o en Zonas GEO distintas de las Zonas Aprobadas, deben obtener permiso a través de UTMISS antes de despegar."},{id:9,name:"Áreas densamente pobladas",desc:"Esta área se muestra en rojo en el mapa. En circunstancias normales, la población de esta zona está más concentrada, así que no sobrevuele esta zona. (Ejemplo: bloque comercial)"}],types:[{id:0,name:"Aeropuerto"},{id:1,name:"Zona especial"},{id:2,name:"Zona Militar"},{id:4,name:"Zona recomendada"},{id:10,name:"Aeropuerto"},{id:13,name:"Aeropuerto recreacional"},{id:14,name:"Aeropuerto recreacional"},{id:15,name:"Espacio aéreo clase B"},{id:16,name:"Espacio aéreo clase C"},{id:17,name:"Espacio aéreo clase D"},{id:18,name:"Espacio aéreo clase E"},{id:19,name:"Helipuerto"},{id:23,name:"Planta de energía"},{id:24,name:"Prisión"},{id:26,name:"Estadio"},{id:27,name:"Espacio aéreo prohibido"},{id:28,name:"Espacio aéreo restringido"},{id:29,name:"Restricción de vuelo temporal"},{id:30,name:"Planta de energía nuclear"},{id:31,name:"Aeropuertos sin pavimentar"},{id:32,name:"Zonas especiales"},{id:33,name:"Zonas militares"},{id:34,name:"Helipuerto"},{id:35,name:"Base de hidroaviones"},{id:36,name:"Restricción de vuelo temporal"},{id:39,name:"Zonas aprobadas para VANTs livianos"},{id:41,name:"Zonas reglamentarias restringidas para VANTs livianos"}]}}),U="data:image/svg+xml,%3csvg id='Layer_1' data-name='Layer 1' xmlns='http://www.w3.org/2000/svg' viewBox='0 0 280.18 280.18'%3e%3cdefs%3e%3cstyle%3e.cls-1%7bfill:%23ffce00%3bfill-opacity:0.68%3bstroke:%23ffce00%3b%7d.cls-1%2c.cls-3%2c.cls-5%2c.cls-6%7bstroke-miterlimit:10%3bstroke-width:0.75px%3b%7d.cls-2%7bfill:%23ff7900%3bfill-opacity:0.46%3b%7d.cls-3%7bfill:%231072d6%3bfill-opacity:0.57%3bstroke:%231072d6%3b%7d.cls-4%7bopacity:0.63%3b%7d.cls-5%7bfill:%23bcbcbc%3bstroke:%23666%3b%7d.cls-6%7bfill:%23fc3424%3bfill-opacity:0.4%3bstroke:%23fc3424%3b%7d%3c/style%3e%3c/defs%3e%3cpath class='cls-1' d='M109.79%2c109.23c-44.68%2c44.68-40.36%2c121.45%2c9.66%2c171.47S246.24%2c335%2c290.92%2c290.36s40.36-121.46-9.65-171.48S154.48%2c64.54%2c109.79%2c109.23ZM270.56%2c270c-34.64%2c34.64-94.15%2c31.29-132.92-7.48s-42.12-98.28-7.48-132.92%2c94.14-31.29%2c132.92%2c7.48S305.2%2c235.36%2c270.56%2c270Z' transform='translate(-59.88 -59.29)'/%3e%3cpath class='cls-2' d='M130.16%2c129.59c-34.64%2c34.64-31.29%2c94.15%2c7.48%2c132.92s98.28%2c42.12%2c132.92%2c7.48%2c31.29-94.14-7.48-132.92S164.79%2c95%2c130.16%2c129.59Zm118%2c118c-24%2c24-64.91%2c22.14-91.29-4.23S128.56%2c176.07%2c152.6%2c152s64.91-22.14%2c91.28%2c4.24S272.15%2c223.51%2c248.12%2c247.55Z' transform='translate(-59.88 -59.29)'/%3e%3cellipse class='cls-3' cx='200.36' cy='199.79' rx='61.55' ry='67.54' transform='translate(-142.47 140.9) rotate(-45)'/%3e%3cg id='Layer_3' data-name='Layer 3'%3e%3cg class='cls-4'%3e%3cpolygon class='cls-5' points='166.25 180 236.66 279.6 236.75 279.51 279.51 236.75 279.6 236.66 180 166.25 166.25 180'/%3e%3cpolygon class='cls-5' points='113.92 100.18 43.51 0.58 43.43 0.67 0.67 43.43 0.58 43.51 100.18 113.92 113.92 100.18'/%3e%3c/g%3e%3cpolygon class='cls-6' points='180 113.92 166.25 100.18 140.09 126.34 113.92 100.18 100.18 113.92 126.34 140.09 100.18 166.25 113.92 180 140.09 153.84 166.25 180 180 166.25 153.84 140.09 180 113.92'/%3e%3c/g%3e%3cg id='Layer_3_copy' data-name='Layer 3 copy'%3e%3cg class='cls-4'%3e%3cpolygon class='cls-5' points='100.18 166.25 0.58 236.66 0.67 236.75 43.43 279.51 43.51 279.6 113.92 180 100.18 166.25'/%3e%3cpolygon class='cls-5' points='180 113.92 279.6 43.51 279.51 43.43 236.75 0.67 236.66 0.58 166.25 100.18 180 113.92'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e";function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){M(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=S(e);if(t){var r=S(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return A(e)}(this,n)}}var Q=[0,1,2,3,4,5,6,7,8,9],X="ol-dji-geozones--ctrl-toggle-hidden",ee=document.createElement("div"),te=function(d){Z(_,d);var h,b,w=$(_);function _(e){var t;z(this,_),M(A(t=w.call(this,{target:e.target,element:ee})),"_options",void 0),M(A(t),"_i18n",void 0),M(A(t),"_paramsLevels",void 0),M(A(t),"_useApiForPopUp",void 0),M(A(t),"_isVisible",void 0),M(A(t),"_hideGeozones",void 0),M(A(t),"_currentZoom",void 0),M(A(t),"_lastZoom",void 0),M(A(t),"_initialized",void 0),M(A(t),"_moveendEvtKey",void 0),M(A(t),"_clickEvtKey",void 0),M(A(t),"_layers",void 0),M(A(t),"_areaDownloaded",void 0),M(A(t),"divControl",void 0),M(A(t),"popupContent",void 0),M(A(t),"_map",void 0),M(A(t),"_view",void 0),M(A(t),"_projection",void 0),M(A(t),"overlay",void 0);var n={urlProxy:"",drone:"spark",zonesMode:"total",country:"US",displayLevels:[2,6,1,0,3,4,7],activeLevels:[2,6,1,0,3,4,7],createPanel:"full",target:null,startCollapsed:!1,startActive:!0,dronesToDisplay:N,extent:null,loadingElement:'<div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>',clickEvent:"singleclick",language:"en",alert:null};return t._options=oe(n,e),t._i18n=H[t._options.language in H?t._options.language:"en"],t._i18n=oe(t._i18n,e.i18n||{}),t._paramsLevels=B,t._useApiForPopUp=!1,t._hideGeozones=!0,t._isVisible=!1,t._layers=[],t.divControl=null,t._areaDownloaded=null,t}return C(_,[{key:"setMap",value:function(e){I(S(_.prototype),"setMap",this).call(this,e),e?(this._options.createPanel&&this._createPanel(this._options.createPanel,this._options.startCollapsed),this._options.startActive&&this.show()):(ee.remove(),this.destroy())}},{key:"_initialize",value:function(){var n=this;this._map=I(S(_.prototype),"getMap",this).call(this),this._view=this._map.getView(),this._projection=this._view.getProjection();var r;r=function(e){var t,o=e.getGeometry(),r=e.get("level"),i=n._getLevelParamsById(r);if(o instanceof a||o instanceof c){var s=e.get("color");t=new u({fill:new p({color:_.colorWithAlpha(s,.3)}),stroke:new f({color:s,width:1}),zIndex:i.zIndex})}else o instanceof l&&(t=new u({image:new m({src:i.markerIcon,scale:.35,anchor:[.5,.9],crossOrigin:"anonymous"}),zIndex:2*i.zIndex}));return t},Q.forEach((function(o){var i={name:"ol-dji-geozones",level:o,zIndex:2*n._getLevelParamsById(o).zIndex,visible:!n._hideGeozones&&!!n.activeLevels.includes(o),source:new t({attributions:'<a href="https://www.dji.com/flysafe/geo-map" rel="nofollow noopener noreferrer" target="_blank">DJI GeoZoneMap</a>'}),style:r};n._options.extent&&(i.extent=n._options.extent);var a=new e(i);n._map.addLayer(a),n._layers.push(a)})),function(){var e=document.createElement("div");e.id="ol-dji-geozones--popup",e.className="ol-dji-geozones--ol-popup ol-dji-geozones--".concat(n._options.theme),n.popupContent=document.createElement("div"),n.popupContent.id="ol-dji-geozones--popup-content",n.popupContent.className="ol-dji-geozones--ol-popup-content";var t=document.createElement("a");t.id="ol-dji-geozones--popup-closer",t.className="ol-dji-geozones--ol-popup-closer",t.href="#",t.onclick=function(){return n.overlay.setPosition(void 0),t.blur(),!1},e.append(t),e.append(n.popupContent),n.overlay=new o({element:e,autoPan:{animation:{duration:250}}}),n._map.addOverlay(n.overlay)}(),n._moveendEvtKey=n._map.on("moveend",(function(){n._currentZoom=n._view.getZoom(),n._currentZoom!==n._lastZoom?function(){if(n._currentZoom<9)n._isVisible&&(n._setLayersVisible(!1),n._isVisible=!1,n._setControlEnabled(!1));else{if(n._isVisible){if(!n._lastZoom||n._currentZoom>n._lastZoom)return}else n._setLayersVisible(!0),n._isVisible=!0,n._setControlEnabled(!0),n.divControl&&n.divControl.classList.remove(X);n._getInfoFromView()}}():n._isVisible&&!n._hideGeozones&&n._getInfoFromView(),n._lastZoom=n._currentZoom})),n._clickEvtKey=n._map.on(n._options.clickEvent,(function(e){var t=n._useApiForPopUp?"useApiForPopUp":"useFeaturesForPopUp";n._getPointInfoFromClick(e,t)})),this._initialized=!0,I(S(_.prototype),"dispatchEvent",this).call(this,"init")}},{key:"_createPanel",value:function(e,t){var n=this;if(this.divControl=ee,this.divControl.className="ol-dji-geozones ol-control ol-dji-geozones--".concat(this._options.theme),this._hideGeozones?this.divControl.classList.add("ol-dji-geozones--ctrl-toggle-hidden"):this._isVisible||this.divControl.classList.add("ol-dji-geozones--ctrl-disabled"),t&&this.divControl.classList.add("ol-dji-geozones--ctrl-collapsed"),!0===e||"full"===e)!function(){n.divControl.classList.add("ol-dji-geozones--ctrl-full"),n.divControl.innerHTML="\n            <header>\n                <h3>".concat(n._i18n.labels.djiGeoZones,'</h3>\n                <span class="ol-dji-geozones--loading">\n                    ').concat(n._options.loadingElement,'\n                </span>\n            </header>\n            <main>\n                <section class="ol-dji-geozones--selectors"></section>\n                <section>\n                    <div class="ol-dji-geozones--logo" title="').concat(n._i18n.labels.expand,'"><img src="').concat(U,'"/></div>\n                    <span class="ol-dji-geozones--advice">').concat(n._i18n.labels.helperZoom,"</span>\n                </section>\n            </main>\n            ");var e=function(){var e=document.createElement("div");e.className="ol-dji-geozones--drone-selector";var t=document.createElement("select");t.onchange=function(e){var t=e.target;n.drone=t.value||t.options[t.selectedIndex].value,n._getInfoFromView(!0)},n._isVisible||t.setAttribute("disabled","disabled");var o="";return n.dronesToDisplay.forEach((function(e){var t=n.drone===e.id?"selected":"";o+='<option value="'.concat(e.id,'" ').concat(t,">").concat(e.label,"</option>")})),t.innerHTML=o,e.append(t),e}();n.divControl.querySelector(".ol-dji-geozones--selectors").append(e);var t=function(){var e=function(e){var t=e.target,o=Number(t.value);t.checked?n.addLevels(o):n.removeLevels(o)},t=function(e,t,n){var o=document.createElement("label");return o.htmlFor=t,o.append(function(e){var t=document.createElement("span");return t.className="ol-dji-geozones--mark",t.style.border="1px ".concat(e," solid"),t.style.backgroundColor=_.colorWithAlpha(e,.4),t}(n)),o.append(e),o},o=function(o,r){var i=r.name,a=r.desc,s=r.color,l=!n._isVisible,c="level"+o,d=document.createElement("div");return d.className="ol-dji-geozones--item-ctl ol-dji-geozones--item-ctl-".concat(o),d.title=a,d.setAttribute("data-level",String(o)),d.append(function(t,o,r){var i=document.createElement("input");return i.type="checkbox",i.name=t,i.id=t,i.value=String(o),i.onclick=e,-1!==n.activeLevels.indexOf(o)&&(i.checked=!0),r&&(i.disabled=!0),i}(c,o,l)),d.append(t(i,c,s)),d},r=document.createElement("div");return r.className="ol-dji-geozones--level-selector",n._options.displayLevels.forEach((function(e){var t=o(e,n.getLevelById(e));r.append(t)})),r}();n.divControl.querySelector(".ol-dji-geozones--selectors").append(t);var o,r=((o=document.createElement("button")).className="ol-dji-geozones--collapse ol-dji-geozones--btn-sm",o.title=n._i18n.labels.collapse,o.onclick=function(){return n.setPanelCollapsed(!0)},o);n.divControl.querySelector("header").append(r);var i=function(){var e=document.createElement("button");return e.className="ol-dji-geozones--visibility ol-dji-geozones--btn-sm",e.title=n._i18n.labels.hideGeozones,e.innerHTML='<img src="'.concat("data:image/svg+xml,%3csvg version='1.1' xmlns='http://www.w3.org/2000/svg' width='768' height='768' viewBox='0 0 768 768'%3e%3cpath d='M384 288q39 0 67.5 28.5t28.5 67.5-28.5 67.5-67.5 28.5-67.5-28.5-28.5-67.5 28.5-67.5 67.5-28.5zM384 544.5q66 0 113.25-47.25t47.25-113.25-47.25-113.25-113.25-47.25-113.25 47.25-47.25 113.25 47.25 113.25 113.25 47.25zM384 144q118.5 0 214.5 66t138 174q-42 108-138 174t-214.5 66-214.5-66-138-174q42-108 138-174t214.5-66z'%3e%3c/path%3e%3c/svg%3e",'"/>'),e.onclick=function(){n.hide()},e}();n.divControl.querySelector("header").append(i),n.divControl.querySelector(".ol-dji-geozones--logo").onclick=function(){n.divControl.classList.contains(X)&&n.show(),n.setPanelCollapsed(!1)}}();else{if("compact"!==e)return;n.divControl.classList.add("ol-dji-geozones--ctrl-compact"),n.divControl.innerHTML='\n            <header>\n                <span class="ol-dji-geozones--loading">\n                    '.concat(n._options.loadingElement,'\n                </span>\n            </header>\n            <main>\n                <section>\n                    <div class="ol-dji-geozones--logo" title="').concat(n._i18n.labels.showHide,'"><img src="').concat(U,'"/></div>\n                </section>\n            </main>\n            '),n.divControl.querySelector(".ol-dji-geozones--logo").onclick=function(){n.divControl.classList.contains("ol-dji-geozones--ctrl-toggle-hidden")?n.show():n.hide()}}}},{key:"_setLayersVisible",value:function(e){var t=this;this.layers.forEach((function(n){e?e&&t.activeLevels.includes(n.get("level"))&&n.setVisible(e):n.setVisible(e)}))}},{key:"_setControlEnabled",value:function(e){if(this.divControl){var t=function(t){t.forEach((function(t){e?t.removeAttribute("disabled"):t.disabled=!0}))};e?this.divControl.classList.remove("ol-dji-geozones--ctrl-disabled"):this.divControl.classList.add("ol-dji-geozones--ctrl-disabled"),t(this.divControl.querySelectorAll("input")),t(this.divControl.querySelectorAll("select"))}}},{key:"_getPointInfoFromClick",value:(b=k(R.mark((function e(t,n){var o,i,a,s,l,c,d,u,p=this;return R.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=["name","level","type","height","shape","start_at","end_at","url","address","description"],i=0,a=function(){var e=k(R.mark((function e(t){var n;return R.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i+=1,e.abrupt("return",new Promise((function(e){setTimeout(k(R.mark((function o(){var a,s,l,c,d,u,f,m;return R.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(n===i){o.next=2;break}return o.abrupt("return");case 2:return a=r.transform(t,p._projection,"EPSG:4326"),s={lat:a[1],lng:a[0]},o.next=6,p._getApiGeoData("info",s);case 6:l=o.sent,(c=l.areas).length||e(!1),d=[],u=W(c);try{for(u.s();!(f=u.n()).done;)m=f.value,d.push(m)}catch(e){u.e(e)}finally{u.f()}e(d);case 13:case"end":return o.stop()}}),o)}))),100)})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s=function(e){var t=[];return e.forEach((function(e){var n={};o.forEach((function(t){return n[t]=e.get(t)})),t.push(n)})),t},l=function(e,t){var n=function(e){var t=e.name,n=e.level,o=e.type,r=e.height,i=e.description,a=e.begin_at,s=e.end_at,l=e.address,c=e.url,d=p.getLevelById(n),u=p._i18n.labels,f='\n                    <div class="ol-dji-geozones--marker">\n                        <img src="'.concat(d.markerCircle,'">\n                    </div>\n                    <div class="ol-dji-geozones--main">\n                        <h3 class="ol-dji-geozones--title">').concat(t,'</h3>\n                        <p class="ol-dji-geozones--level">').concat(u.level,": ").concat(d.name,' </p>\n                        <p class="ol-dji-geozones--type">').concat(u.type,": ").concat(p._getGeozoneTypeById(o).name,"</p>\n                        ").concat(a?'<p class="ol-dji-geozones--start_time">'.concat(u.startTime,": ").concat(a,"</p>"):"","\n                        ").concat(s?'<p class="ol-dji-geozones--end_time">'.concat(u.endTime,": ").concat(s,'</p><p class="ol-dji-geozones--time_tips">').concat(u.timeTips,"</p>"):"","         \n                        ").concat(r?'<p class="ol-dji-geozones--height">'.concat(u.maxAltitude," (m): ").concat(r,"</p>"):""," \n                        ").concat(l?'<p class="ol-dji-geozones--address">'.concat(u.address,": ").concat(l,"</p>"):"","\n                        ").concat(i?'<p class="ol-dji-geozones--desc">'.concat(u.tips,": ").concat(i,"</p>"):"","\n                        ").concat(c?'<p class="ol-dji-geozones--url">'.concat(u.link,': <a href="').concat(c,'">').concat(u.learnMore,"</a></p>"):"","\n                </div>"),m=document.createElement("div");return m.className="ol-dji-geozones--item",m.innerHTML=f,m.querySelector(".ol-dji-geozones--level").append(function(e){var t,n=function(){r.style.position="fixed";var e=i.getBoundingClientRect();r.style.top=e.top+"px",r.style.left=e.left+"px",r.classList.add("ol-dji-geozones--active-tooltip"),t=p._map.once("movestart",(function(){return o()})),document.body.append(r)},o=function(){r.classList.remove("ol-dji-geozones--active-tooltip"),g.unByKey(t),a.append(r)},r=document.createElement("span");r.className="ol-dji-geozones--info ol-dji-geozones--".concat(p._options.theme),r.innerHTML='<span class="ol-dji-geozones--info-text">'.concat(e.desc,'</span><span class="ol-dji-geozones--info-back"></span>'),r.setAttribute("style","--level-color: ".concat(e.color));var i=document.createElement("span");i.className="ol-dji-geozones--icon",i.innerHTML='<img src="'.concat("data:image/svg+xml,%3csvg version='1.1' xmlns='http://www.w3.org/2000/svg' width='768' height='768' viewBox='0 0 768 768'%3e%3ctitle%3e%3c/title%3e%3cpath d='M352.5 288v-64.5h63v64.5h-63zM384 640.5q105 0 180.75-75.75t75.75-180.75-75.75-180.75-180.75-75.75-180.75 75.75-75.75 180.75 75.75 180.75 180.75 75.75zM384 64.5q132 0 225.75 93.75t93.75 225.75-93.75 225.75-225.75 93.75-225.75-93.75-93.75-225.75 93.75-225.75 225.75-93.75zM352.5 544.5v-192h63v192h-63z'%3e%3c/path%3e%3c/svg%3e",'">'),i.onmouseover=function(){return n()},i.onclick=function(){return n()},i.onmouseout=function(){return o()};var a=document.createElement("div");return a.className="ol-dji-geozones--tooltip",a.append(i),a.append(r),a}(d)),m},o=[],r=Array.isArray(e)?e:[e];p.popupContent.innerHTML="",r.forEach((function(e){var t=n(e);-1===o.indexOf(t.innerHTML)&&(o.push(t.innerHTML),p.popupContent.append(t),p.popupContent.append(document.createElement("HR")))})),p.overlay.setPosition(t)},e.prev=5,this._isVisible){e.next=9;break}return this.overlay.setPosition(void 0),e.abrupt("return");case 9:if(c={layerFilter:function(e){return"ol-dji-geozones"===e.get("name")}},"useApiForPopUp"!==n){e.next=19;break}if(!this._map.hasFeatureAtPixel(t.pixel,c)){e.next=17;break}return this.popupContent.innerHTML=this._options.loadingElement.toString(),this.overlay.setPosition(t.coordinate),e.next=16,a(t.coordinate);case 16:d=e.sent;case 17:e.next=21;break;case 19:(u=this._map.getFeaturesAtPixel(t.pixel,c))&&u.length&&(d=s(u));case 21:d&&d.length?l(d,t.coordinate):this.overlay.setPosition(void 0),e.next=27;break;case 24:e.prev=24,e.t0=e.catch(5),console.log(e.t0);case 27:case"end":return e.stop()}}),e,this,[[5,24]])}))),function(e,t){return b.apply(this,arguments)})},{key:"_getInfoFromView",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],o=function(t){var n=t.get("color"),o=Object.keys(e._paramsLevels).find((function(t){return e._paramsLevels[t].color===n}));return t.set("level",o,!0),t},i=function(t){var r=t.areas;if(!r||!r.length)return!1;var i,s=[],d=W(r);try{var u=function(){var t=i.value;if(function(t){var n,o,r=W(e.layers);try{for(r.s();!(o=r.n()).done&&!(n=o.value.getSource().getFeatureById(t)););}catch(e){r.e(e)}finally{r.f()}return n}(t.area_id))return"continue";var r={address:t.address,begin_at:t.begin_at,color:t.color,city:t.city,country:t.country,data_source:t.data_source,description:t.description,end_at:t.end_at,height:t.height,level:t.level,name:t.name,radius:t.radius,shape:t.shape,type:t.type,url:t.url,lng:t.lng,lat:t.lat};if(t.polygon_points){var d=new n(K(K({},r),{},{geometry:new a(t.polygon_points).transform("EPSG:4326",e._projection)}));d.setId(t.area_id+"_poly"),s.push(o(d))}var u=new n(K(K({},r),{},{geometry:new l([t.lng,t.lat]).transform("EPSG:4326",e._projection)}));u.setId(t.area_id),s.push(o(u)),t.sub_areas&&t.sub_areas.forEach((function(r){var i;(i=r.polygon_points?new n({color:r.color,height:r.height,level:r.level,name:t.name,radius:r.radius,shape:r.shape,type:t.type,lng:r.lng,lat:r.lat,geometry:new a(r.polygon_points).transform("EPSG:4326",e._projection)}):new n({color:r.color,height:r.height,level:r.level,name:t.name,radius:r.radius,shape:r.shape,type:t.type,lng:r.lng,lat:r.lat,geometry:new c([r.lng,r.lat],r.radius/1e5).transform("EPSG:4326",e._projection)})).setId(r.area_id),s.push(o(i))}))};for(d.s();!(i=d.n()).done;)u()}catch(e){d.e(e)}finally{d.f()}return s},s=function(t){t&&t.forEach((function(t){var n=t.get("level");e.getLayerByLevel(n).getSource().addFeature(t)}))};setTimeout(k(R.mark((function n(){var o,a,l,c,d;return R.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:n.next=2;break;case 2:return n.prev=2,e._showLoading(!0),o=e._view.getCenter(),a=r.transform(o,e._projection,"EPSG:4326"),l={lat:a[1],lng:a[0]},t&&(e._areaDownloaded=null),n.next=10,e._getApiGeoData("areas",l);case 10:if(c=n.sent){n.next=13;break}return n.abrupt("return");case 13:t&&e.layers.forEach((function(e){e.getSource().clear()})),(d=i(c))&&s(d),e._showLoading(!1),n.next=24;break;case 19:n.prev=19,n.t0=n.catch(2),e.dispatchEvent(new ne(n.t0)),n.t0.message&&console.error(n.t0),e._showLoading(!1);case 24:case"end":return n.stop()}}),n,null,[[2,19]])}))),300)}},{key:"_getApiGeoData",value:(h=k(R.mark((function e(t,n){var o,l,c,d,u,p,f=this;return R.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=function(){var e=k(R.mark((function e(t,n,o){var r,i,a,s,l,c;return R.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.lng,i=n.lat,a=new URL("areas"===t?"https://www-api.dji.com/api/geo/areas":"https://www-api.dji.com/api/geo/point-info"),s={drone:f.drone,zones_mode:f.zonesMode,country:f.country,level:Q,lng:r,lat:i,search_radius:o},Object.keys(s).forEach((function(e){return a.searchParams.append(e,s[e])})),l=f._options.urlProxy?f._options.urlProxy+encodeURIComponent(a.toString()):a.toString(),e.next=8,fetch(l);case 8:if((c=e.sent).ok){e.next=11;break}throw new Error("HTTP-Error: "+c.status);case 11:return e.next=13,c.json();case 13:return e.abrupt("return",e.sent);case 14:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}(),l=function(){var e=k(R.mark((function e(t,n){var r;return R.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o("info",t,n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),c=function(){var e=k(R.mark((function e(t,n){var r,i,l;return R.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=f._view.calculateExtent(),i=a.fromExtent(r),!f._areaDownloaded){e.next=8;break}if(!(f._areaDownloaded.intersectsCoordinate(y.getCenter(r))&&f._areaDownloaded.intersectsCoordinate(y.getBottomLeft(r))&&f._areaDownloaded.intersectsCoordinate(y.getTopRight(r))&&f._areaDownloaded.intersectsCoordinate(y.getBottomRight(r))&&f._areaDownloaded.intersectsCoordinate(y.getTopLeft(r)))){e.next=5;break}return e.abrupt("return");case 5:f._areaDownloaded.appendPolygon(i),e.next=9;break;case 8:f._areaDownloaded=new s([i.getCoordinates()]);case 9:return e.next=11,o("areas",t,n);case 11:return l=e.sent,e.abrupt("return",l);case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d=function(e){var t=[e.lng,e.lat],n=f._map.getSize(),o=f._view.calculateExtent(n),a=[(o=r.transformExtent(o,f._projection,"EPSG:4326"))[0],o[1]],s=i.getDistance(t,a);return parseInt(String(s))},this._isVisible){e.next=6;break}return e.abrupt("return");case 6:if(u=d(n),"areas"!==t){e.next=13;break}return e.next=10,c(n,u);case 10:p=e.sent,e.next=16;break;case 13:return e.next=15,l(n,u);case 15:p=e.sent;case 16:return e.abrupt("return",p);case 17:case"end":return e.stop()}}),e,this)}))),function(e,t){return h.apply(this,arguments)})},{key:"_showLoading",value:function(e){this.divControl&&(e?this.divControl.classList.add("ol-dji-geozones--isLoading"):this.divControl.classList.remove("ol-dji-geozones--isLoading"))}},{key:"setPanelVisible",value:function(e){this.divControl&&(e?this.divControl.classList.remove("ol-dji-geozones--ctrl-hidden"):this.divControl.classList.add("ol-dji-geozones--ctrl-hidden"))}},{key:"setPanelCollapsed",value:function(e){this.divControl&&(e?this.divControl.classList.add("ol-dji-geozones--ctrl-collapsed"):this.divControl.classList.remove("ol-dji-geozones--ctrl-collapsed"))}},{key:"layers",get:function(){return this._layers}},{key:"getLayerByLevel",value:function(e){var t,n,o=W(this.layers);try{for(o.s();!(n=o.n()).done;){var r=n.value;if(null!=r.get("level")&&r.get("level")==e){t=r;break}}}catch(e){o.e(e)}finally{o.f()}return t}},{key:"_getGeozoneTypeById",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._i18n.types.find((function(t){return t.id==e}))}},{key:"dronesToDisplay",get:function(){return this._options.dronesToDisplay}},{key:"drone",get:function(){return this._options.drone},set:function(e){this._options.drone=e,this._getInfoFromView()}},{key:"zonesMode",get:function(){return this._options.zonesMode},set:function(e){this._options.zonesMode=e,this._getInfoFromView()}},{key:"country",get:function(){return this._options.country},set:function(e){this._options.country=e,this._getInfoFromView()}},{key:"_getLevelParamsById",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._paramsLevels.find((function(t){return t.id==e}))}},{key:"getLevelById",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=this._paramsLevels.find((function(t){return t.id==e})),n=this._i18n.levels.find((function(t){return t.id==e}));return K(K({},t),n)}},{key:"activeLevels",get:function(){return this._options.activeLevels},set:function(e){var t=this;this._options.activeLevels=e,this._options.displayLevels.forEach((function(n){var o=t.getLayerByLevel(n);e.includes(n)?o.setVisible(!0):o.setVisible(!1)}))}},{key:"addLevels",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=Array.isArray(e)?e:[e];this.activeLevels=[].concat(x(this.activeLevels),x(o)),n&&o.forEach((function(e){t.getLayerByLevel(e).setVisible(!0)}))}},{key:"removeLevels",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],o=Array.isArray(e)?e:[e];this.activeLevels=this.activeLevels.filter((function(e){return!o.includes(e)})),n&&o.forEach((function(e){t.getLayerByLevel(e).setVisible(!1)}))}},{key:"destroy",value:function(){var e=this;this.layers.forEach((function(t){e._map.removeLayer(t)})),g.unByKey(this._clickEvtKey),g.unByKey(this._moveendEvtKey)}},{key:"hide",value:function(){this._hideGeozones=!0,this._setLayersVisible(!1),this._setControlEnabled(!1),this.divControl&&this.divControl.classList.add(X)}},{key:"show",value:function(){this._initialized||this._initialize(),this._hideGeozones=!1,this._isVisible=this._view.getZoom()>=9,this._showLoading(!0),this._isVisible?(this._setControlEnabled(!0),this._getInfoFromView(),this._setLayersVisible(!0),this.divControl&&this.divControl.classList.remove(X)):(this._alert(this._i18n.labels.helperZoom),this._showLoading(!1))}},{key:"_alert",value:function(e){"function"==typeof this._options.alert?this._options.alert(e):alert(e)}}],[{key:"colorWithAlpha",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=j(Array.from(v.asArray(e)),3),o=n[0],r=n[1],i=n[2];return v.asString([o,r,i,t])}}]),_}(h),ne=function(e){Z(n,e);var t=$(n);function n(e){var o;return z(this,n),M(A(o=t.call(this,"error")),"message",void 0),M(A(o),"stack",void 0),o.message=e.message,o.stack=e.stack,o}return C(n)}(d),oe=function e(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),r=1;r<n;r++)o[r-1]=arguments[r];return o.forEach((function(n){Object.keys(n).forEach((function(o){var r=n[o],i=t[o];t[o]=i&&r&&"object"===b(i)&&"object"===b(r)&&!Array.isArray(i)?e(i,r):r}))})),t};return te}));
//# sourceMappingURL=ol-dji-geozones.min.js.map
